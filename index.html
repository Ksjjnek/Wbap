<style>
    /* ... (–ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å—Ç–∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è) ... */

    /* –≠—Ñ—Ñ–µ–∫—Ç –≤—ã–ª–µ—Ç–∞—é—â–∏—Ö —Ü–∏—Ñ—Ä */
    .floating-text {
        position: absolute;
        pointer-events: none;
        font-weight: bold;
        z-index: 1000;
        animation: floatUp 1.2s ease-out forwards;
    }

    @keyframes floatUp {
        0% { transform: translateY(0) scale(1); opacity: 1; }
        100% { transform: translateY(-50px) scale(1.5); opacity: 0; }
    }

    .win-effect { color: #32d74b; text-shadow: 0 0 10px rgba(50, 215, 75, 0.8); }
    .loss-effect { color: #ff453a; opacity: 0.8; }
    .neutral-effect { color: #ffffff; }

    .cost-notice {
        margin-top: 8px;
        font-size: 14px;
        font-weight: bold;
        color: #ff9f0a; /* –û—Ä–∞–Ω–∂–µ–≤—ã–π, —á—Ç–æ–±—ã –±—Ä–æ—Å–∞–ª–æ—Å—å –≤ –≥–ª–∞–∑–∞ */
    }
</style>

<button class="play-btn" onclick="launchBalls()">–ò–ì–†–ê–¢–¨</button>
<div class="cost-notice" id="cost-warning">–° –±–∞–ª–∞–Ω—Å–∞ —Å–ø–∏—à–µ—Ç—Å—è: 10 ü™ô</div>

<script>
    // ... (–Ω–∞—á–∞–ª–æ —Å–∫—Ä–∏–ø—Ç–∞ –∫–∞–∫ –≤ –ø—Ä–æ—à–ª–æ–º –æ—Ç–≤–µ—Ç–µ) ...

    function updateUI() {
        if (demoBal < 100) demoBal = 100;
        const balText = mode === 'demo' ? `${Math.floor(demoBal)} ü™ô` : `${realBal.toFixed(2)} USDT`;
        document.getElementById('current-balance').innerText = balText;
        
        const totalCost = balls * bet;
        const currency = mode === 'demo' ? 'ü™ô' : 'USDT';
        document.getElementById('cost-warning').innerText = `–° –±–∞–ª–∞–Ω—Å–∞ —Å–ø–∏—à–µ—Ç—Å—è: ${totalCost} ${currency}`;
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞ –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏
    function spawnEffect(x, y, amount, multiplier) {
        const el = document.createElement('div');
        el.className = 'floating-text';
        
        if (multiplier > 1) {
            el.innerText = `+${amount} üî•`;
            el.classList.add('win-effect');
        } else if (multiplier < 1 && multiplier > 0) {
            el.innerText = `-${(bet - amount).toFixed(1)} üíÄ`;
            el.classList.add('loss-effect');
        } else if (multiplier === 0) {
            el.innerText = `0! ‚ùå`;
            el.classList.add('loss-effect');
        } else {
            el.innerText = `–ë–ï–ó –ü–û–¢–ï–†–¨ ‚öñÔ∏è`;
            el.classList.add('neutral-effect');
        }

        el.style.left = x + 'px';
        el.style.top = (y + window.scrollY - 30) + 'px';
        document.body.appendChild(el);
        
        setTimeout(() => el.remove(), 1200);
    }

    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Matter.js
    const { Engine, Render, Runner, Bodies, Composite, Events } = Matter;
    const engine = Engine.create();
    
    // –í–ê–ñ–ù–û: –£–±–∏—Ä–∞–µ–º –∫–æ–ª–ª–∏–∑–∏–∏ –º–µ–∂–¥—É —à–∞—Ä–∏–∫–∞–º–∏ —á–µ—Ä–µ–∑ —Ñ–∏–ª—å—Ç—Ä—ã
    const BALL_CATEGORY = 0x0002;
    const STATIC_CATEGORY = 0x0001;

    // ... (—Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–Ω–¥–µ—Ä–∞ –∏ –ø–∏–Ω–æ–≤) ...

    // –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–∏–Ω–æ–≤ —É–∫–∞–∂–∏—Ç–µ –∏–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é:
    // Bodies.circle(x, y, 3, { isStatic: true, collisionFilter: { category: STATIC_CATEGORY }, ... })

    Events.on(engine, 'collisionStart', e => {
        e.pairs.forEach(p => {
            const b = p.bodyA.label === 'ball' ? p.bodyA : (p.bodyB.label === 'ball' ? p.bodyB : null);
            const s = p.bodyA.label.startsWith('s_') ? p.bodyA : (p.bodyB.label.startsWith('s_') ? p.bodyB : null);
            
            if(b && s) {
                const res = cfg[s.label.split('_')[1]];
                const winAmount = b.bet * res.v;
                
                if(b.mode === 'demo') demoBal += winAmount;
                else realBal += winAmount;
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç —Ç–∞–º, –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å–µ–Ω—Å–æ—Ä
                spawnEffect(s.position.x, 300, winAmount, res.v);
                
                updateUI();
                Composite.remove(engine.world, b);
            }
        });
    });

    function launchBalls() {
        const cost = balls * bet;
        if(mode === 'demo' && demoBal < cost) return tg.showAlert("–ú–∞–ª–æ –º–æ–Ω–µ—Ç!");
        if(mode === 'real' && realBal < cost) return tg.showAlert("–ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å!");

        if(mode === 'demo') demoBal -= cost; else realBal -= cost;
        updateUI();

        for(let i=0; i<balls; i++) {
            setTimeout(() => {
                const ball = Bodies.circle(200 + (Math.random()*10-5), 10, 6, { 
                    restitution: 0.5, 
                    friction: 0.01, 
                    label: 'ball',
                    // –ú–ê–ì–ò–Ø –¢–£–¢: —à–∞—Ä–∏–∫–∏ –Ω–µ —Å—Ç–∞–ª–∫–∏–≤–∞—é—Ç—Å—è –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º
                    collisionFilter: {
                        category: BALL_CATEGORY,
                        mask: STATIC_CATEGORY // –°—Ç–∞–ª–∫–∏–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ —Å–æ —Å—Ç–∞—Ç–∏—á–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ (–ø–∏–Ω–∞–º–∏ –∏ —Å–µ–Ω—Å–æ—Ä–∞–º–∏)
                    },
                    render: { fillStyle: '#ff3b30' } 
                });
                ball.bet = bet; 
                ball.mode = mode;
                Composite.add(engine.world, ball);
            }, i * 150);
        }
    }
    </script>
