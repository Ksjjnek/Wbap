<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dice Pro</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; background: #0f0f0f; font-family: 'Inter', sans-serif; color: white; user-select: none; }
        
        /* === –í–ï–†–•–ù–ò–ô –ë–õ–û–ö (–ü—Ä–æ—Ñ–∏–ª—å –∏ –ë–∞–ª–∞–Ω—Å) === */
        #top-bar {
            position: absolute; top: 15px; left: 15px; right: 15px;
            display: flex; justify-content: space-between; align-items: center; z-index: 100;
        }
        .glass-panel {
            background: rgba(255, 255, 255, 0.08); backdrop-filter: blur(15px);
            padding: 8px 16px; border-radius: 30px; border: 1px solid rgba(255,255,255,0.1);
        }
        #user-info { display: flex; align-items: center; gap: 10px; }
        #user-photo { width: 32px; height: 32px; border-radius: 50%; border: 1px solid #fff; }
        
        #balance-container { display: flex; flex-direction: column; align-items: flex-end; cursor: pointer; }
        #balance-mode { font-size: 10px; opacity: 0.6; text-transform: uppercase; letter-spacing: 1px; }
        #balance-value { font-weight: 800; font-size: 16px; color: #4ade80; }

        /* === –í–°–ü–õ–´–í–ê–Æ–©–ò–ï –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø (–¢–æ—Å—Ç—ã) === */
        #toast {
            position: absolute; top: 80px; left: 50%; transform: translateX(-50%);
            background: #fff; color: #000; padding: 8px 20px; border-radius: 20px;
            font-weight: bold; font-size: 14px; opacity: 0; pointer-events: none;
            transition: 0.3s; z-index: 200; box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }

        /* === –ú–ï–ù–Æ –°–¢–ê–†–¢–ê === */
        #menu-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; align-items: center; justify-content: center; z-index: 150; background: #0f0f0f;
            transition: opacity 0.5s;
        }
        .game-card {
            width: 280px; height: 320px; background: linear-gradient(145deg, #2a2a2a, #1a1a1a);
            border-radius: 24px; position: relative; box-shadow: 0 15px 35px rgba(0,0,0,0.6);
            border: 1px solid rgba(255,255,255,0.05); overflow: hidden;
        }
        .card-preview { width: 100%; height: 65%; background: #222; display: flex; align-items: center; justify-content: center; font-size: 100px; }
        .card-title { position: absolute; bottom: 25px; left: 20px; font-size: 26px; font-weight: 800; }
        .play-btn { position: absolute; bottom: 20px; right: 20px; padding: 12px 24px; font-size: 14px; font-weight: bold; background: #fff; color: #000; border: none; border-radius: 30px; cursor: pointer; }

        /* === –ò–ì–†–û–í–û–ô –≠–ö–†–ê–ù –ò UI === */
        #game-screen { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: none; z-index: 50; }
        #three-canvas-container { position: absolute; width: 100%; height: 100%; z-index: -1; }
        
        /* –†–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ —ç–∫—Ä–∞–Ω–µ */
        #result-screen { position: absolute; top: 20%; width: 100%; text-align: center; pointer-events: none; opacity: 0; transition: 0.3s; }
        #result-screen.show { opacity: 1; transform: scale(1.1); }
        #result-value { font-size: 80px; font-weight: 900; line-height: 1; color: #fff; text-shadow: 0 0 20px rgba(255,255,255,0.3); }

        /* –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        #control-panel {
            position: absolute; bottom: 0; left: 0; width: 100%;
            background: linear-gradient(to top, #111 60%, transparent);
            padding: 20px 15px 30px; box-sizing: border-box; display: flex; flex-direction: column; gap: 15px;
        }

        /* –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–ß–µ—Ç/–ù–µ—á–µ—Ç, –ë—ã—Å—Ç—Ä–æ, –ê–≤—Ç–æ) */
        .controls-row { display: flex; justify-content: space-between; gap: 10px; }
        .toggle-btn { 
            flex: 1; padding: 12px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); 
            color: #fff; border-radius: 15px; font-weight: bold; cursor: pointer; transition: 0.2s; 
        }
        .toggle-btn.active { background: #fff; color: #000; }
        .icon-btn { width: 45px; background: rgba(255,255,255,0.1); border: none; border-radius: 15px; color: #fff; font-size: 18px; }
        .icon-btn.active { background: #facc15; color: #000; }

        /* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞–≤–∫–æ–π */
        .bet-input-group { display: flex; align-items: center; background: rgba(0,0,0,0.5); border-radius: 20px; padding: 5px; border: 1px solid rgba(255,255,255,0.1); }
        .bet-input-group button { width: 45px; height: 45px; border-radius: 15px; background: rgba(255,255,255,0.1); border: none; color: white; font-size: 20px; font-weight: bold; cursor: pointer; }
        .bet-input-group input { flex: 1; background: none; border: none; color: white; font-size: 20px; font-weight: bold; text-align: center; outline: none; width: 100%; }
        
        .bet-steps { display: flex; justify-content: center; gap: 10px; margin-top: -5px; }
        .bet-steps button { background: none; border: 1px solid rgba(255,255,255,0.3); color: #aaa; border-radius: 10px; padding: 4px 15px; font-size: 12px; cursor: pointer; }
        .bet-steps button.active { color: #fff; border-color: #fff; }

        /* –ö–Ω–æ–ø–∫–∞ –∏–≥—Ä—ã */
        #roll-button {
            width: 100%; padding: 18px; font-size: 18px; font-weight: 900; border-radius: 20px;
            border: none; background: #4ade80; color: #000; cursor: pointer; text-transform: uppercase;
        }
        #roll-button:disabled { background: #555; color: #888; cursor: not-allowed; }

        /* === –ú–û–î–ê–õ–ö–ê –ê–í–¢–û–ò–ì–†–´ === */
        #auto-modal {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); backdrop-filter: blur(5px); z-index: 300;
            display: none; align-items: center; justify-content: center;
        }
        .modal-content { background: #222; padding: 25px; border-radius: 25px; width: 250px; text-align: center; }
        .modal-content input { width: 100%; padding: 10px; margin: 15px 0; border-radius: 10px; border: none; text-align: center; font-size: 18px; font-weight: bold; box-sizing: border-box; }
        .modal-content button { width: 100%; padding: 12px; border-radius: 10px; border: none; background: #fff; color: #000; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>

    <div id="top-bar">
        <div id="user-info" class="glass-panel">
            <img id="user-photo" src="" alt="" style="display:none;">
            <div id="user-name" style="font-weight: bold; font-size: 14px;">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
        <div id="balance-container" class="glass-panel">
            <div id="balance-mode">–î–µ–º–æ –°—á–µ—Ç</div>
            <div id="balance-value">1000 üç¨</div>
        </div>
    </div>

    <div id="toast">–°–æ–æ–±—â–µ–Ω–∏–µ</div>

    <div id="menu-screen">
        <div class="game-card">
            <div class="card-preview">üé≤</div>
            <div class="card-title">–ö—É–±–∏–∫</div>
            <button class="play-btn" id="start-game-btn">–ò–≥—Ä–∞—Ç—å</button>
        </div>
    </div>

    <div id="game-screen">
        <div id="three-canvas-container"></div>
        
        <div id="result-screen">
            <span id="result-value"></span>
        </div>

        <div id="control-panel">
            <div class="controls-row">
                <button class="toggle-btn active" id="btn-even">–ß–ï–¢</button>
                <button class="toggle-btn" id="btn-odd">–ù–ï–ß–ï–¢</button>
                <button class="icon-btn" id="btn-fast">‚ö°</button>
                <button class="icon-btn" id="btn-auto-menu">‚ò∞</button>
            </div>

            <div class="bet-input-group">
                <button id="bet-minus">-</button>
                <input type="number" id="bet-input" value="10">
                <button id="bet-plus">+</button>
            </div>

            <div class="bet-steps">
                <button class="step-btn active" data-step="1">1</button>
                <button class="step-btn" data-step="5">5</button>
                <button class="step-btn" data-step="10">10</button>
            </div>

            <button id="roll-button">–ò–ì–†–ê–¢–¨</button>
        </div>
    </div>

    <div id="auto-modal">
        <div class="modal-content">
            <h3>–ê–≤—Ç–æ-–∏–≥—Ä–∞</h3>
            <p style="font-size: 12px; color: #aaa;">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—Ä–æ—Å–∫–æ–≤:</p>
            <input type="number" id="auto-count-input" value="10">
            <button id="start-auto-btn">–ó–ê–ü–£–°–¢–ò–¢–¨</button>
            <button id="close-auto-btn" style="margin-top: 10px; background: #444; color: #fff;">–û–¢–ú–ï–ù–ê</button>
        </div>
    </div>

    <script>
        // === TELEGRAM INIT ===
        const tg = window.Telegram.WebApp;
        tg.expand();
        if (tg.initDataUnsafe?.user) {
            const user = tg.initDataUnsafe.user;
            document.getElementById('user-name').innerText = user.first_name;
            if (user.photo_url) {
                const img = document.getElementById('user-photo');
                img.src = user.photo_url; img.style.display = 'block';
            }
        }

        // === –ò–ì–†–û–í–ê–Ø –õ–û–ì–ò–ö–ê –ò –≠–ö–û–ù–û–ú–ò–ö–ê ===
        let isDemo = true;
        let demoBalance = 1000;
        let realBalance = 0;
        
        let betAmount = 10;
        let betStep = 1;
        let winCondition = 'even'; // 'even' (—á–µ—Ç) –∏–ª–∏ 'odd' (–Ω–µ—á–µ—Ç)
        const multiplier = 1.9;

        let fastMode = false;
        let autoPlay = false;
        let autoPlayRemaining = 0;
        let isRolling = false;

        // –≠–ª–µ–º–µ–Ω—Ç—ã UI
        const balModeEl = document.getElementById('balance-mode');
        const balValEl = document.getElementById('balance-value');
        const betInput = document.getElementById('bet-input');
        const rollBtn = document.getElementById('roll-button');
        const toast = document.getElementById('toast');

        function updateBalanceUI() {
            if (isDemo) {
                balModeEl.innerText = "–î–µ–º–æ –°—á–µ—Ç";
                balValEl.innerText = demoBalance.toFixed(0) + " üç¨";
                balValEl.style.color = "#a78bfa";
            } else {
                balModeEl.innerText = "–†–µ–∞–ª—å–Ω—ã–π –ë–∞–ª–∞–Ω—Å";
                balValEl.innerText = realBalance.toFixed(2) + " USDT";
                balValEl.style.color = "#4ade80";
            }
        }

        function showToast(msg) {
            toast.innerText = msg;
            toast.style.opacity = '1';
            setTimeout(() => toast.style.opacity = '0', 2000);
        }

        function calcPotentialWin() {
            showToast(`–í–æ–∑–º–æ–∂–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à: ${(betAmount * multiplier).toFixed(2)}`);
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
        document.getElementById('balance-container').onclick = () => {
            if(isRolling) return;
            isDemo = !isDemo;
            tg.HapticFeedback.selectionChanged();
            updateBalanceUI();
        };

        // –õ–æ–≥–∏–∫–∞ –∫–Ω–æ–ø–æ–∫ —Å—Ç–∞–≤–∫–∏
        document.getElementById('bet-minus').onclick = () => { betAmount = Math.max(1, betAmount - betStep); betInput.value = betAmount; calcPotentialWin(); tg.HapticFeedback.selectionChanged();};
        document.getElementById('bet-plus').onclick = () => { betAmount += betStep; betInput.value = betAmount; calcPotentialWin(); tg.HapticFeedback.selectionChanged();};
        betInput.onchange = (e) => { betAmount = Math.max(1, parseInt(e.target.value) || 1); betInput.value = betAmount; calcPotentialWin();};

        document.querySelectorAll('.step-btn').forEach(btn => {
            btn.onclick = (e) => {
                document.querySelectorAll('.step-btn').forEach(b => b.classList.remove('active'));
                e.target.classList.add('active');
                betStep = parseInt(e.target.getAttribute('data-step'));
                tg.HapticFeedback.selectionChanged();
            }
        });

        // –£—Å–ª–æ–≤–∏—è –ø–æ–±–µ–¥—ã
        document.getElementById('btn-even').onclick = () => { winCondition = 'even'; document.getElementById('btn-even').classList.add('active'); document.getElementById('btn-odd').classList.remove('active'); calcPotentialWin(); tg.HapticFeedback.selectionChanged();};
        document.getElementById('btn-odd').onclick = () => { winCondition = 'odd'; document.getElementById('btn-odd').classList.add('active'); document.getElementById('btn-even').classList.remove('active'); calcPotentialWin(); tg.HapticFeedback.selectionChanged();};

        // –ë—ã—Å—Ç—Ä—ã–π —Ä–µ–∂–∏–º
        document.getElementById('btn-fast').onclick = (e) => {
            fastMode = !fastMode;
            e.target.classList.toggle('active');
            tg.HapticFeedback.selectionChanged();
        };

        // –ê–≤—Ç–æ–∏–≥—Ä–∞
        const autoModal = document.getElementById('auto-modal');
        document.getElementById('btn-auto-menu').onclick = () => autoModal.style.display = 'flex';
        document.getElementById('close-auto-btn').onclick = () => autoModal.style.display = 'none';
        document.getElementById('start-auto-btn').onclick = () => {
            autoPlayRemaining = parseInt(document.getElementById('auto-count-input').value) || 10;
            autoPlay = true;
            autoModal.style.display = 'none';
            rollBtn.innerText = "–°–¢–û–ü (–ê–í–¢–û)";
            rollBtn.style.background = "#ef4444"; // –ö—Ä–∞—Å–Ω—ã–π –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
            rollBtn.style.color = "#fff";
            triggerRoll();
        };

        // === –ü–ï–†–ï–•–û–î –ò–ó –ú–ï–ù–Æ ===
        document.getElementById('start-game-btn').onclick = () => {
            document.getElementById('menu-screen').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('menu-screen').style.display = 'none';
                document.getElementById('game-screen').style.display = 'block';
                init3D();
            }, 300);
        };

        // === 3D –õ–û–ì–ò–ö–ê (THREE.JS) ===
        let scene, camera, renderer, diceGroup, dice;

        const diceRotations = {
            1: { x: 0, y: -Math.PI/2, z: 0 },
            6: { x: 0, y: Math.PI/2, z: 0 },
            2: { x: Math.PI/2, y: 0, z: 0 },
            5: { x: -Math.PI/2, y: 0, z: 0 },
            3: { x: 0, y: 0, z: 0 },
            4: { x: 0, y: Math.PI, z: 0 }
        };

        function init3D() {
            const container = document.getElementById('three-canvas-container');
            scene = new THREE.Scene();
            // –ö–∞–º–µ—Ä–∞ —Å–º–æ—Ç—Ä–∏—Ç –ø—Ä—è–º–æ –≤ —Ü–µ–Ω—Ç—Ä
            camera = new THREE.PerspectiveCamera(40, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 0, 9);
            camera.lookAt(0, 0, 0);

            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            container.appendChild(renderer.domElement);

            const light = new THREE.DirectionalLight(0xffffff, 1.4);
            light.position.set(2, 5, 5);
            scene.add(light);
            scene.add(new THREE.AmbientLight(0xffffff, 0.5));

            // –ì—Ä—É–ø–ø–∞ –¥–ª—è –Ω–∞–∫–ª–æ–Ω–∞ –∫—É–±–∏–∫–∞
            diceGroup = new THREE.Group();
            scene.add(diceGroup);
            
            // –ù–∞–∫–ª–æ–Ω—è–µ–º –≤—Å—é –≥—Ä—É–ø–ø—É –Ω–µ–º–Ω–æ–≥–æ –≤–Ω–∏–∑ (–ª–∏—Ü–µ–≤–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –±—É–¥–µ—Ç —Å–º–æ—Ç—Ä–µ—Ç—å —á—É—Ç—å –≤–≤–µ—Ä—Ö –Ω–∞ –∫–∞–º–µ—Ä—É)
            diceGroup.rotation.x = 0.25; 

            const geometry = new THREE.BoxGeometry(2.5, 2.5, 2.5, 6, 6, 6);
            
            const createFace = (dotsCount) => {
                const canvas = document.createElement('canvas');
                canvas.width = 256; canvas.height = 256;
                const ctx = canvas.getContext('2d');
                
                ctx.fillStyle = '#1e1e1e';
                ctx.beginPath(); ctx.roundRect(0, 0, 256, 256, 50); ctx.fill();

                ctx.fillStyle = '#ffffff';
                const pips = {
                    1: [[128, 128]],
                    2: [[70, 70], [186, 186]],
                    3: [[70, 70], [128, 128], [186, 186]],
                    4: [[70, 70], [186, 70], [70, 186], [186, 186]],
                    5: [[70, 70], [186, 70], [128, 128], [70, 186], [186, 186]],
                    6: [[70, 70], [186, 70], [70, 128], [186, 128], [70, 186], [186, 186]]
                };
                pips[dotsCount].forEach(p => {
                    ctx.beginPath(); ctx.arc(p[0], p[1], 24, 0, Math.PI * 2); ctx.fill();
                });

                return new THREE.MeshStandardMaterial({ map: new THREE.CanvasTexture(canvas), roughness: 0.2 });
            };

            const materials = [
                createFace(1), createFace(6), createFace(2), createFace(5), createFace(3), createFace(4) 
            ];

            dice = new THREE.Mesh(geometry, materials);
            dice.rotation.set(diceRotations[1].x, diceRotations[1].y, diceRotations[1].z);
            diceGroup.add(dice); // –î–æ–±–∞–≤–ª—è–µ–º –∫—É–±–∏–∫ –≤ –Ω–∞–∫–ª–æ–Ω–µ–Ω–Ω—É—é –≥—Ä—É–ø–ø—É

            animate();
        }

        function animate() {
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
        }

        // === –ì–õ–ê–í–ù–´–ô –¶–ò–ö–õ –ë–†–û–°–ö–ê ===
        rollBtn.onclick = () => {
            if (autoPlay && !isRolling) {
                // –ï—Å–ª–∏ –Ω–∞–∂–∞–ª–∏ "–°–¢–û–ü" –≤–æ –≤—Ä–µ–º—è –ø–∞—É–∑—ã –∞–≤—Ç–æ–∏–≥—Ä—ã
                autoPlay = false;
                rollBtn.innerText = "–ò–ì–†–ê–¢–¨";
                rollBtn.style.background = "#4ade80";
                rollBtn.style.color = "#000";
                return;
            }
            triggerRoll();
        };

        function triggerRoll() {
            if (isRolling) return;

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞
            if (isDemo) {
                if (demoBalance - betAmount < 100) {
                    showToast("–°—Ç–∞–≤–∫–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞: –±–∞–ª–∞–Ω—Å –î–µ–º–æ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∏–∂–µ 100üç¨");
                    autoPlay = false; updateBtn(); return;
                }
                demoBalance -= betAmount;
            } else {
                if (realBalance < betAmount) {
                    showToast("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ USDT!");
                    autoPlay = false; updateBtn(); return;
                }
                realBalance -= betAmount;
            }
            updateBalanceUI();

            isRolling = true;
            document.getElementById('result-screen').classList.remove('show');
            tg.HapticFeedback.impactOccurred('medium');

            const result = Math.floor(Math.random() * 6) + 1;
            const target = diceRotations[result];

            const startX = dice.rotation.x;
            const startY = dice.rotation.y;
            const startZ = dice.rotation.z;

            // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–µ–∂–∏–º–∞ (–ø—Ä—ã–∂–∫–æ–≤ –±–æ–ª—å—à–µ –Ω–µ—Ç!)
            const spins = fastMode ? 2 : 6;
            const duration = fastMode ? 600 : 1800;
            const extraSpins = spins * Math.PI * 2; 
            
            const finalRotation = {
                x: target.x + extraSpins,
                y: target.y + extraSpins,
                z: target.z + extraSpins
            };

            const startTime = Date.now();

            const rollAnimation = () => {
                const elapsed = Date.now() - startTime;
                const t = Math.min(elapsed / duration, 1);
                const ease = 1 - Math.pow(1 - t, 3); // –ü–ª–∞–≤–Ω–æ–µ –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ

                dice.rotation.x = startX + (finalRotation.x - startX) * ease;
                dice.rotation.y = startY + (finalRotation.y - startY) * ease;
                dice.rotation.z = startZ + (finalRotation.z - startZ) * ease;

                if (t < 1) {
                    requestAnimationFrame(rollAnimation);
                } else {
                    finishRoll(result);
                }
            };

            requestAnimationFrame(rollAnimation);
        }

        function finishRoll(result) {
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –Ω–µ–≤–∏–¥–∏–º—ã–µ –≥—Ä–∞–¥—É—Å—ã
            dice.rotation.set(diceRotations[result].x, diceRotations[result].y, diceRotations[result].z);
            
            // –†–∞—Å—á–µ—Ç –ø–æ–±–µ–¥—ã
            const isEven = result % 2 === 0;
            const isWin = (winCondition === 'even' && isEven) || (winCondition === 'odd' && !isEven);
            
            const resScreen = document.getElementById('result-screen');
            const resVal = document.getElementById('result-value');
            
            if (isWin) {
                const winAmount = betAmount * multiplier;
                if (isDemo) demoBalance += winAmount; else realBalance += winAmount;
                resVal.innerText = `+${winAmount.toFixed(isDemo?0:2)}`;
                resVal.style.color = "#4ade80";
                tg.HapticFeedback.notificationOccurred('success');
            } else {
                resVal.innerText = `-${betAmount}`;
                resVal.style.color = "#ef4444";
                tg.HapticFeedback.notificationOccurred('error');
            }
            
            resScreen.classList.add('show');
            updateBalanceUI();

            setTimeout(() => {
                isRolling = false;
                resScreen.classList.remove('show');
                
                // –õ–æ–≥–∏–∫–∞ –∞–≤—Ç–æ–∏–≥—Ä—ã
                if (autoPlay) {
                    autoPlayRemaining--;
                    if (autoPlayRemaining > 0) {
                        setTimeout(triggerRoll, 500); // –ü–∞—É–∑–∞ –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º –±—Ä–æ—Å–∫–æ–º
                    } else {
                        autoPlay = false;
                        updateBtn();
                        showToast("–ê–≤—Ç–æ-–∏–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞");
                    }
                }
            }, fastMode ? 800 : 1500);
        }

        function updateBtn() {
            rollBtn.innerText = "–ò–ì–†–ê–¢–¨";
            rollBtn.style.background = "#4ade80";
            rollBtn.style.color = "#000";
        }

        window.addEventListener('resize', () => {
            if(camera && renderer) {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            }
        });
    </script>
</body>
    </html>
