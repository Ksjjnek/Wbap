<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>NovaChat</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
body{
  font-family: Arial;
  background:#0f172a;
  color:white;
  margin:0;
  text-align:center;
}
#start{margin-top:150px;}
button{
  padding:15px 30px;
  font-size:18px;
  border:none;
  border-radius:10px;
  background:#3b82f6;
  color:white;
  cursor:pointer;
}
#chat{
  display:none;
  height:100vh;
  flex-direction:column;
}
#messages{flex:1; overflow:auto; padding:20px; text-align:left;}
#input{display:flex; padding:10px; background:#1e293b;}
#input input{flex:1; padding:10px; border:none; border-radius:8px;}
#input button{margin-left:10px;}
</style>
</head>

<body>

<div id="start">
  <h1>NovaChat üí¨</h1>
  <p>–ê–Ω–æ–Ω–∏–º–Ω—ã–π —á–∞—Ç –≤–Ω—É—Ç—Ä–∏ Telegram</p>
  <button onclick="startApp()">START</button>
</div>

<div id="chat">
  <div id="messages"></div>
  <div id="input">
    <input id="text" placeholder="–ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ">
    <button onclick="send()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
  </div>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

/* üîí –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —Å–∞–π—Ç –æ—Ç–∫—Ä—ã—Ç —á–µ—Ä–µ–∑ Telegram */
if(!tg.initData){
  document.body.innerHTML="‚ùå –û—Ç–∫—Ä–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞";
}

/* –ø–æ–ª—É—á–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è */
const user = tg.initDataUnsafe.user;

function startApp(){
  document.getElementById("start").style.display="none";
  document.getElementById("chat").style.display="flex";
  addMessage("–°–∏—Å—Ç–µ–º–∞","–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, "+user.first_name+"!");
}

function send(){
  let text = document.getElementById("text").value;
  if(text=="") return;
  addMessage(user.first_name,text);
  tg.sendData(text); // –æ—Ç–ø—Ä–∞–≤–∫–∞ –±–æ—Ç—É
  document.getElementById("text").value="";
}

function addMessage(name,text){
  let msg=document.createElement("div");
  msg.innerHTML="<b>"+name+":</b> "+text;
  document.getElementById("messages").appendChild(msg);
  document.getElementById("messages").scrollTop=document.getElementById("messages").scrollHeight;
}
</script>

</body>
</html>
#messages{
flex:1;
overflow:auto;
padding:20px;
text-align:left;
}

#input{
display:flex;
padding:10px;
background:#1e293b;
}

#input input{
flex:1;
padding:10px;
border:none;
border-radius:8px;
}

#input button{
margin-left:10px;
}
</style>

</head>

<body>

<div id="start">
<h1>NovaChat üí¨</h1>
<p>–ê–Ω–æ–Ω–∏–º–Ω—ã–π —á–∞—Ç –≤–Ω—É—Ç—Ä–∏ Telegram</p>
<button onclick="startApp()">START</button>
</div>

<div id="chat">
<div id="messages"></div>

<div id="input">
<input id="text" placeholder="–ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ">
<button onclick="send()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
</div>
</div>

<script>

const tg = window.Telegram.WebApp;
tg.expand();

/* üîí –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ —Å–∞–π—Ç –æ—Ç–∫—Ä—ã—Ç –∏–º–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ Telegram */
if(!tg.initData){
document.body.innerHTML="–û—Ç–∫—Ä–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞";
}

/* üîí ID —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω–æ–≥–æ –±–æ—Ç–∞ */
const BOT_ID = "8250250632";

/* –ø–æ–ª—É—á–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è */
const user = tg.initDataUnsafe.user;

function startApp(){
document.getElementById("start").style.display="none";
document.getElementById("chat").style.display="flex";

addMessage("–°–∏—Å—Ç–µ–º–∞","–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å "+user.first_name);
}

function send(){

let text=document.getElementById("text").value;

if(text=="") return;

addMessage(user.first_name,text);

/* –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –±–æ—Ç—É */
tg.sendData(text);

document.getElementById("text").value="";
}

function addMessage(name,text){

let msg=document.createElement("div");

msg.innerHTML="<b>"+name+":</b> "+text;

document.getElementById("messages").appendChild(msg);

}

</script>

</body>
</html>
