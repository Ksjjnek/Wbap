<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Mining Casino</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
body{
    background:#1e1e1e;
    color:white;
    font-family:sans-serif;
    text-align:center;
}
#game{
    width:400px;
    height:500px;
    background:#2a2a2a;
    margin:auto;
    position:relative;
    overflow:hidden;
    border-radius:10px;
    border:2px solid #444;
}
.block{
    width:80px;
    height:80px;
    background:#555;
    border:2px solid #333;
    position:absolute;
    transition: all 0.3s;
}
.pickaxe{
    width:60px;
    height:60px;
    position:absolute;
    top:-60px;
}
#reward{
    display:none;
    font-size:24px;
    margin-top:10px;
    animation: blink 0.5s infinite alternate;
}
@keyframes blink{
    from{opacity:1;}
    to{opacity:0.3;}
}
button{
    margin-top:10px;
    padding:10px 20px;
    font-size:16px;
    border:none;
    border-radius:8px;
    background:#4caf50;
    color:white;
    cursor:pointer;
}
button:hover{
    background:#45a049;
}
</style>
</head>
<body>

<h2>‚õèÔ∏è Mining Casino</h2>
<div id="game"></div>
<button onclick="dropPickaxe()">–ë—Ä–æ—Å–∏—Ç—å –∫–∏—Ä–∫—É</button>
<div id="reward">üéÅ –°—É–Ω–¥—É–∫! +100 –º–æ–Ω–µ—Ç</div>
<div id="coins">üí∞ –ú–æ–Ω–µ—Ç—ã: 0</div>

<script>
const game = document.getElementById("game");
const coinsEl = document.getElementById("coins");

let blocks = [];
let destroyedRows = 0;
let coins = 0;

const pickaxes = [
    {name:"–î–µ—Ä–µ–≤—è–Ω–Ω–∞—è", power:1, src:"https://static.wikia.nocookie.net/minecraft_gamepedia/images/5/5b/Wooden_Pickaxe.png"},
    {name:"–ñ–µ–ª–µ–∑–Ω–∞—è", power:2, src:"https://static.wikia.nocookie.net/minecraft_gamepedia/images/8/80/Iron_Pickaxe.png"},
    {name:"–ê–ª–º–∞–∑–Ω–∞—è", power:3, src:"https://static.wikia.nocookie.net/minecraft_gamepedia/images/0/02/Diamond_Pickaxe.png"},
    {name:"–ù–µ–∑–µ—Ä–∏—Ç–æ–≤–∞—è", power:4, src:"https://static.wikia.nocookie.net/minecraft_gamepedia/images/e/e3/Netherite_Pickaxe.png"}
];

function createBlocks(){
    blocks = [];
    destroyedRows = 0;
    const rows = 4;
    const cols = 4;
    for(let y=0;y<rows;y++){
        for(let x=0;x<cols;x++){
            let block = document.createElement("div");
            block.className="block";
            block.style.left=(x*90+20)+"px";
            block.style.top=(y*90+150)+"px";
            block.dataset.hp = 1; // –æ–¥–∏–Ω —É–¥–∞—Ä –ª–æ–º–∞–µ—Ç –±–ª–æ–∫
            game.appendChild(block);
            blocks.push(block);
        }
    }
}

createBlocks();

function dropPickaxe(){
    // –≤—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—É—é –∫–∏—Ä–∫—É
    const pickaxe = pickaxes[Math.floor(Math.random()*pickaxes.length)];

    let pick = document.createElement("img");
    pick.src = pickaxe.src;
    pick.className="pickaxe";
    pick.style.left = (Math.random()*320)+"px";
    game.appendChild(pick);

    let y = -60;

    let fall = setInterval(()=>{
        y+=8;
        pick.style.top = y+"px";

        blocks.forEach(block=>{
            if(block.style.display!="none"){
                let bx=block.offsetLeft;
                let by=block.offsetTop;
                let px=pick.offsetLeft;
                let py=pick.offsetTop;
                if(px>bx-40 && px<bx+80 && py>by-40 && py<by+80){
                    // —É–º–µ–Ω—å—à–∞–µ–º hp –±–ª–æ–∫–∞
                    block.dataset.hp -= pickaxe.power;
                    if(block.dataset.hp <=0){
                        block.style.display="none";
                    }
                    pick.remove();
                    checkRows();
                    clearInterval(fall);
                }
            }
        });

        if(y>500){
            pick.remove();
            clearInterval(fall);
        }
    },20);
}

function checkRows(){
    const rowCount = [0,0,0,0];
    blocks.forEach(b=>{
        let row = Math.floor((b.offsetTop-150)/90);
        if(b.style.display=="none"){
            rowCount[row]++;
        }
    });
    rowCount.forEach((r,i)=>{
        if(r>=4){
            destroyedRows++;
            // –Ω–∞–≥—Ä–∞–¥–∞ –∑–∞ —Ä—è–¥
            coins += 50;
            coinsEl.innerText = "üí∞ –ú–æ–Ω–µ—Ç—ã: "+coins;
        }
    });

    if(destroyedRows>=2){
        document.getElementById("reward").style.display="block";
        coins += 100;
        coinsEl.innerText = "üí∞ –ú–æ–Ω–µ—Ç—ã: "+coins;
    }
}

</script>

</body>
</html>
